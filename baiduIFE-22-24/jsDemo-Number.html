<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>
        button {
            width: 200px;
            height: 55px;
            vertical-align: middle;
            margin: 0 10px 10px 0;
        }

        [type="text"],
        textarea,
        [type="number"] {
            width: 200px;
            height: 20px;
            vertical-align: middle;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <div class="task1">
        <h3>练习1： 实现需求</h3>

        <ul>
            <li>按照HTML中按钮的描述以此实现功能</li>
            <li>计算结果显示在 id 为 result 的 P 标签中</li>
            <li>除了第一个按钮，其它按钮操作时，都需要判断输入是否为数字，否则在 console 中输出错误信息</li>
        </ul>

        <label>numberA
            <input id="radio-a" type="radio" name="math-obj" value="a">
        </label>

        <input id="num-a" type="text" required placeholder="请输入">
        <label>numberB
            <input id="radio-b" type="radio" name="math-obj" value="b">
        </label>
        <input id="num-b" type="text" placeholder="请输入">
        <p>Result:
            <span id="result"></span>
        </p>
        <div id="btnWrap">
            <button>判断当前选中的输入框输入内容是否为数字</button>
            <button id="2">把 A 四舍五入为 B 个小数位数的数字</button>
            <button>当前选中数字的绝对值</button>
            <button>对当前选中的数字进行上舍入</button>
            <br>
            <button>对当前选中的数字进行下舍入</button>
            <button>把当前选中的数字四舍五入为最接近的整数</button>
            <button>返回 A 和 B 中的最高值</button>
            <button>返回 A 和 B 中的最低值</button>
        </div>
    </div>
    <hr>

    <div class="task2">
        <h3>练习2：实现需求</h3>
        <li>按照HTML中按钮的描述以此实现功能</li>
        <li>计算结果显示在 id 为 result 的 P 标签中</li>
        <br>

        <div>
            <label>String A:
                <input id="radio-a2" type="radio" checked="true" name="str-obj" value="a">
            </label>
            <textarea id="str-a2"></textarea>
            <label>String B:
                <input id="radio-b2" type="radio" name="str-obj" value="b">
            </label>
            <textarea id="str-b2"></textarea>
            <label>Num A：
                <input id="num-a2" type="number" value="0">
            </label>
            <label>Num B：
                <input id="num-b2" type="number" value="1">
            </label>
        </div>
        <p>Result:
            <span id="result2"></span>
        </p>
        <div id="btnWrap2">
            <button>获取当前选中输入的内容长度</button>
            <button>当前选中输入中的第3个字符</button>
            <button>把两个输入框的文字连接在一起输出（concat）</button>
            <button>输入B中的内容，在输入A的内容中第一次出现的位置（indexOf）</button>
            <br>
            <button>输入A中的内容，在输入B的内容中最后一次出现的位置（lastIndexOf）</button>
            <button>使用slice获取选中输入框内容的部分内容，参数为num-a及num-b</button>
            <button>当前选中输入框的行数</button>
            <button>使用substr获取选中输入框内容的子字符串，参数为num-a及num-b</button>
            <br>
            <button>把所选输入框中的内容全部转为大写</button>
            <button>把所选输入框中的内容全部转为小写</button>
            <button>把所选输入框中内容的半角空格全部去除</button>
            <button>把所选输入框中内容的a全部替换成另外一个输入框中的内容</button>
        </div>


    </div>
    <hr>
    <div class="task3">
        <h3>练习3：实现一个字符串头尾去除空格的函数</h3>

        <li>注意需要去除的空格，包括全角、半角空格</li>
        <li>暂时不需要学习和使用正则表达式的方式</li>
        <pre>
        /*
        实现一个字符串头尾去除空格的函数
        注意需要去除的空格，包括全角、半角空格
        暂时不需要学习和使用正则表达式的方式
        */
        // 测试用例
        console.log(diyTrim(' a f b    ')); // ->a f b
        console.log(diyTrim('    ffdaf    ')); // ->ffdaf
        console.log(diyTrim('1    ')); // ->1
        console.log(diyTrim('　　f')); // ->f
        console.log(diyTrim('  　  a f b 　　 ')); // ->a f b
        console.log(diyTrim(' ')); // ->
        console.log(diyTrim('　')); // ->
        console.log(diyTrim('')); // ->

        /*
        去掉字符串str中，连续重复的地方
        */
        // 测试用例
        console.log(removeRepetition("aaaaa")); // ->a
        console.log(removeRepetition("abbbaa")); // ->aba
        console.log(removeRepetition("aabbaabb")); // ->abab
        console.log(removeRepetition("")); // ->
        console.log(removeRepetition("abc")); // ->abc
        </pre>

        <p>结果在控制台中查看</p>
    </div>
    <hr>
    <div class="task4">
        <h3>练习2：有如下对象，分别实现代码下方的几个函数，满足以下需求：</h3>
        <pre>
        var tree = {
            "id": 0,
            "name": "root",
            "left": {
                "id": 1,
                "name": "Simon",
                "left": {
                    "id": 3,
                    "name": "Carl",
                    "left": {
                        "id": 7,
                        "name": "Lee",
                        "left": {
                            "id": 11,
                            "name": "Fate"
                        }
                    },
                    "right": {
                        "id": 8,
                        "name": "Annie",
                        "left": {
                            "id": 12,
                            "name": "Saber"
                        }
                    }
                },
                "right": {
                    "id": 4,
                    "name": "Tony",
                    "left": {
                        "id": 9,
                        "name": "Candy"
                    }
                }
            },
            "right": {
                "id": 2,
                "name": "right",
                "left": {
                    "id": 5,
                    "name": "Carl",
                },
                "right": {
                    "id": 6,
                    "name": "Carl",
                    "right": {
                        "id": 10,
                        "name": "Kai"
                    }
                }
            }
        }
        </pre>
        <li>假设id和name均不会重复，根据输入name找到对应的id</li>
        <li>假设id和name均不会重复，根据输入id找到对应的name</li>
        <li>把这个对象中所有的名字以“前序遍历”的方式全部输出到console中</li>
        <li>把这个对象中所有的名字以“中序遍历”的方式全部输出到console中</li>
        <li>把这个对象中所有的名字以“后序遍历”的方式全部输出到console中</li>
    </div>

    <script>
        var log = console.log.bind(console);
        var task1 = function () {
            var result = document.getElementById("result");
            var btnWrap = document.getElementById("btnWrap");
            var btn = document.getElementsByTagName("button");
            var numbera = document.getElementById("num-a");
            var numberb = document.getElementById("num-b");
            var radioa = document.getElementById("radio-a");
            var radiob = document.getElementById("radio-b");

            btnWrap.addEventListener("click", function (e) {
                //兼容性：标准浏览器用ev.target，IE浏览器用event.srcElement
                var e = e || window.event;
                var t = e.target || e.srcElement;
                switch (t) {
                    case btn[0]:  //判断当前选中的输入框输入内容是否为数字
                        if (radioa.checked && numbera.value) {  //被选中且输入不为空
                            if (isNaN(Number(numbera.value))) {  //NaN与自身不相等NaN != NaN
                                result.innerHTML = numbera.value + " is NaN";
                            } else {
                                result.innerHTML = numbera.value + " is Number";
                            }
                        } else if (radiob.checked && numberb.value) {
                            if (isNaN(Number(numberb.value))) {  //NaN与自身不相等NaN != NaN
                                result.innerHTML = numberb.value + " is NaN";
                            } else {
                                result.innerHTML = numberb.value + " is Number";
                            }
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[1]:  //把 A 四舍五入为 B 个小数位数的数字
                        if (numbera.value && numberb.value) {
                            var num = new Number(numbera.value);
                            result.innerHTML = num.toFixed(numberb.value);
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[2]:  //当前选中数字的绝对值
                        if (radioa.checked && numbera.value) {  //被选中且输入不为空
                            if (isNaN(Number(numbera.value))) {
                                result.innerHTML = numbera.value + " is NaN";
                            } else {
                                result.innerHTML = Math.abs(numbera.value);
                            }
                        } else if (radiob.checked && numberb.value) {
                            if (isNaN(Number(numberb.value))) {
                                result.innerHTML = numberb.value + " is NaN";
                            } else {
                                result.innerHTML = Math.abs(numberb.value);
                            }
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[3]:  //对当前选中的数字进行上舍入
                        if (radioa.checked && numbera.value) {  //被选中且输入不为空
                            if (isNaN(Number(numbera.value))) {
                                result.innerHTML = numbera.value + " is NaN";
                            } else {
                                result.innerHTML = Math.ceil(numbera.value);
                            }
                        } else if (radiob.checked && numberb.value) {
                            if (isNaN(Number(numberb.value))) {
                                result.innerHTML = numberb.value + " is NaN";
                            } else {
                                result.innerHTML = Math.ceil(numberb.value);
                            }
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[4]:  //对当前选中的数字进行下舍入
                        if (radioa.checked && numbera.value) {  //被选中且输入不为空
                            if (isNaN(Number(numbera.value))) {
                                result.innerHTML = numbera.value + " is NaN";
                            } else {
                                result.innerHTML = Math.floor(numbera.value);
                            }
                        } else if (radiob.checked && numberb.value) {
                            if (isNaN(Number(numberb.value))) {
                                result.innerHTML = numberb.value + " is NaN";
                            } else {
                                result.innerHTML = Math.floor(numberb.value);
                            }
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[5]: //把数四舍五入为最接近的整数。
                        if (radioa.checked && numbera.value) {  //被选中且输入不为空
                            if (isNaN(Number(numbera.value))) {
                                result.innerHTML = numbera.value + " is NaN";
                            } else {
                                result.innerHTML = Math.round(numbera.value);
                            }
                        } else if (radiob.checked && numberb.value) {
                            if (isNaN(Number(numberb.value))) {
                                result.innerHTML = numberb.value + " is NaN";
                            } else {
                                result.innerHTML = Math.round(numberb.value);
                            }
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[6]:  //返回 A 和 B 中的最高值
                        if (numbera.value && numberb.value) {
                            result.innerHTML = Math.max(numbera.value, numberb.value);
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[7]://返回 A 和 B 中的最低值
                        if (numbera.value && numberb.value) {
                            result.innerHTML = Math.min(numbera.value, numberb.value);
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                }
            }, false)
        }

        var task2 = function () {
            var result = document.getElementById("result2");
            var btnWrap = document.getElementById("btnWrap2");
            var btn = btnWrap.getElementsByTagName("button");
            var numa = document.getElementById("num-a2");
            var numb = document.getElementById("num-b2");
            var radioa = document.getElementById("radio-a2");
            var radiob = document.getElementById("radio-b2");
            var stra = document.getElementById("str-a2");
            var strb = document.getElementById("str-b2");

            btnWrap.addEventListener("click", function (e) {
                //兼容性：标准浏览器用ev.target，IE浏览器用event.srcElement
                var e = e || window.event;
                var t = e.target || e.srcElement;
                switch (t) {
                    case btn[0]:  //获取当前选中输入的内容长度
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            result.innerHTML = stra.value.length;
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.length;
                        } else {
                            result.innerHTML = "请输入";
                        }
                        break;
                    case btn[1]:  //当前选中输入中的第3个字符
                        if (radioa.checked && stra.value.length >= 3) {  //被选中且输入不为空
                            result.innerHTML = stra.value[2];
                        } else if (radiob.checked && strb.value.length >= 3) {
                            result.innerHTML = strb.value[2];
                        } else {
                            result.innerHTML = "长度不足3"
                        }
                        break;
                    case btn[2]:  //把两个输入框的文字连接在一起输出（concat）
                        if (stra.value && strb.value) {
                            result.innerHTML = stra.value.concat(strb.value);
                        } else {
                            result.innerHTML = "请输入两个字符串";
                        }
                        break;
                    case btn[3]:  //输入B中的内容，在输入A的内容中第一次出现的位置（indexOf)
                        if (stra.value && strb.value) {
                            result.innerHTML = stra.value.indexOf(strb.value);
                        } else {
                            result.innerHTML = "请输入两个字符串";
                        }
                        break;
                    case btn[4]:  //输入A中的内容，在输入B的内容中最后一次出现的位置（lastIndexOf）
                        if (stra.value && strb.value) {
                            result.innerHTML = strb.value.lastIndexOf(stra.value);
                        } else {
                            result.innerHTML = "请输入两个字符串";
                        }
                        break;
                    case btn[5]: //使用slice获取选中输入框内容的部分内容，参数为num-a及num-b
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            result.innerHTML = stra.value.slice(numa.value, numb.value);
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.slice(numa.value, numb.value);
                        }
                        break;
                    case btn[6]:  //当前选中输入框的行数
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            result.innerHTML = stra.value.split(/\r?\n|\r/).length; //\n是换行，英文是New line \r是回车，英文是Carriage return
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.split(/\r?\n|\r/).length;
                        }
                        break;
                    case btn[7]://使用substr获取选中输入框内容的子字符串，参数为num-a及num-b
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            result.innerHTML = stra.value.substr(numa.value, numb.value);
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.substr(numa.value, numb.value);
                        }
                        break;
                    case btn[8]://把所选输入框中的内容全部转为大写
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            result.innerHTML = stra.value.toUpperCase();
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.toUpperCase();
                        }
                        break;
                    case btn[9]://把所选输入框中的内容全部转为小写
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            result.innerHTML = stra.value.toLowerCase();
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.toLowerCase();
                        }
                        break;
                    case btn[10]://把所选输入框中内容的半角空格全部去除
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            // 正则表达式匹配字符串，其中"/ /"这个是固定写法，"\s"是转移符号用以匹配任何
                            // 空白字符，包括空格、制表符、换页符等等，"g"表示全局匹配将替换所有匹配的子串，
                            // 如果不加"g"当匹配到第一个后就结束了。
                            result.innerHTML = stra.value.replace(/\s/g, "");
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.replace(/\s/g, "");
                        }
                        break;
                    case btn[11]:  //把所选输入框中内容的a全部替换成另外一个输入框中的内容
                        if (radioa.checked && stra.value) {  //被选中且输入不为空
                            result.innerHTML = stra.value.replace(/a/g, strb.value);
                        } else if (radiob.checked && strb.value) {
                            result.innerHTML = strb.value.replace(/a/g, stra.value);
                        }
                        break;
                }
            }, false)
        }

        /*task3
        实现一个字符串头尾去除空格的函数
        注意需要去除的空格，包括全角、半角空格
        暂时不需要学习和使用正则表达式的方式
        */
        var diyTrim = function (str) {
            var result = "";
            // if (str[0] == " " || str[0] == "　") {
            //     return "";
            // }
            while (str[0] == " " || str[0] == "　") {
                // 头部发现一个空格切掉一个
                str = str.slice(1);
            }
            while (str[str.length - 1] == " " || str[str.length - 1] == "　") {
                // 尾部发现一个空格切掉一个
                str = str.slice(0, str.length - 2);
            }

            result = str;
            return result;
        }

        // 去掉字符串str中，连续重复的地方
        var removeRepetition = function (str) {
            var result = "";
            for (var i = 0; i < str.length; i++) {
                if (str[i] == str[i + 1]) {
                    //字符相同,什么也不干
                } else {
                    result += str[i];  //字符不同,拼接到str上
                }
            }
            return result;
        }
        var task3 = function () {
            // 测试用例
            log("测试diyTrim");
            console.log("diyTrim(' a f b    ')-> ", diyTrim(' a f b    ')); // ->a f b
            console.log("diyTrim('    ffdaf    ')-> ", diyTrim('    ffdaf    ')); // ->ffdaf
            console.log("diyTrim('1    ')-> ", diyTrim('1    ')); // ->1
            console.log("diyTrim('　　f')-> ", diyTrim('　　f')); // ->f
            console.log("diyTrim('  　  a f b 　　 ')-> ", diyTrim('  　  a f b 　　 ')); // ->a f b
            console.log("diyTrim(' ')-> ", diyTrim(' ')); // ->
            console.log("diyTrim('　')-> ", diyTrim('　')); // ->
            console.log("diyTrim('')-> ", diyTrim('')); // ->


            // 测试用例
            log("测试removeRepetition")
            console.log("removeRepetition('aaaaa')->", removeRepetition("aaaaa")); // ->a
            console.log('removeRepetition("abbbaa")->', removeRepetition("abbbaa")); // ->aba
            console.log('removeRepetition("aabbaabb")->', removeRepetition("aabbaabb")); // ->abab
            console.log('removeRepetition("")->', removeRepetition("")); // ->
            console.log('removeRepetition("abc")->', removeRepetition("abc")); // ->abc
        }

        // task4
        var tree = {
            "id": 0,
            "name": "root",
            "left": {
                "id": 1,
                "name": "Simon",
                "left": {
                    "id": 3,
                    "name": "Carl",
                    "left": {
                        "id": 7,
                        "name": "Lee",
                        "left": {
                            "id": 11,
                            "name": "Fate"
                        }
                    },
                    "right": {
                        "id": 8,
                        "name": "Annie",
                        "left": {
                            "id": 12,
                            "name": "Saber"
                        }
                    }
                },
                "right": {
                    "id": 4,
                    "name": "Tony",
                    "left": {
                        "id": 9,
                        "name": "Candy"
                    }
                }
            },
            "right": {
                "id": 2,
                "name": "right",
                "left": {
                    "id": 5,
                    "name": "Carl",
                },
                "right": {
                    "id": 6,
                    "name": "Carl",
                    "right": {
                        "id": 10,
                        "name": "Kai"
                    }
                }
            }
        }
        // 假设id和name均不会重复，根据输入name找到对应的id
        var findIdByName = function (obj, name) {
            function ergodic(obj) {  //遍历对象
                for (x in obj) {
                    if (typeof (obj[x]) == "object") {
                        ergodic(obj[x]);  //如果属性是对象，进行遍历
                    } else if (obj[x] == name) {
                        console.log("name: " + name + " id: " + obj.id);
                    }
                }
            }
            ergodic(obj);
        }

        // 假设id和name均不会重复，根据输入id找到对应的name
        var findNameById = function (obj, id) {
            function ergodic(obj) {  //遍历对象
                for (x in obj) {
                    if (typeof (obj[x]) == "object") {
                        ergodic(obj[x]);  //如果属性是对象，进行遍历
                    } else if (obj[x] == id) {
                        console.log("id: " + id + " name: " + obj.name);
                    }
                }
            }
            ergodic(obj);
        }

        // 把这个对象中所有的名字以“前序遍历”的方式全部输出到console中

        var getListWithDLR = function (obj) {
            console.log(obj.name);
            if (obj.left) {
                getListWithDLR(obj.left);
            }
            if (obj.right) {
                getListWithDLR(obj.right);
            }
        }
        // 把这个对象中所有的名字以“中序遍历”的方式全部输出到console中

        var getListWithLDR = function (obj) {
            if (obj.left) {
                getListWithLDR(obj.left);
            }
            console.log(obj.name);
            if (obj.right) {
                getListWithLDR(obj.right);
            }
        }

        // 把这个对象中所有的名字以“后序遍历”的方式全部输出到console中

        var getListWithLRD = function (obj) {
            if (obj.left) {
                getListWithLRD(obj.left);
            }
            if (obj.right) {
                getListWithLRD(obj.right);
            }
            console.log(obj.name);
        }
        var task4 = function () {
            log("假设id和name均不会重复，根据输入name找到对应的id");
            findIdByName(tree, "Candy");
            log("假设id和name均不会重复，根据输入id找到对应的name");
            findNameById(tree, 10);
            log("把这个对象中所有的名字以“前序遍历”的方式全部输出到console中");
            getListWithDLR(tree);
            log("把这个对象中所有的名字以“中序遍历”的方式全部输出到console中");
            getListWithLDR(tree);
            log("把这个对象中所有的名字以“后序遍历”的方式全部输出到console中");
            getListWithLRD(tree);
        }
        var __main = function () {
            task1();
            task2();
            log("---------------task3------------------------------------", );
            task3();
            log("\n")
            log("---------------task4------------------------------------");
            task4();
        }
        __main();
    </script>
</body>

</html>